!function(){"use strict";var e=window.wp.element;function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},t.apply(this,arguments)}function a(a={}){return(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52.4 39.97"},(0,e.createElement)("g",{id:"Layer_2","data-name":"Layer 2"},(0,e.createElement)("g",{id:"Layer_1-2","data-name":"Layer 1"},(0,e.createElement)("path",t({},a.color?{fill:"#62ACDF"}:{},{class:"cls-1",d:"M11.66,7.76A9.27,9.27,0,0,0,2.2,6.64,9.07,9.07,0,0,0,0,8,11.67,11.67,0,0,1,11.3,0H52.4L27,19.64Z"})),(0,e.createElement)("path",t({},a.color?{fill:"#1256A1"}:{},{class:"cls-2",d:"M4.28,10.78a4.13,4.13,0,0,1,4.26.51l3.31,2.57L25.46,24.38a2.56,2.56,0,0,0,3.1,0L48.28,9.13l3.83-3v25C52.11,36,47.92,40,42.79,40H11.3C6.16,40,2,36,2,31.21v-17A3.68,3.68,0,0,1,4.28,10.78Z"})))))}const{registerBlockType:r}=wp.blocks,{__:__}=wp.i18n,{SelectControl:o,PanelBody:l,Spinner:n}=wp.components,{RawHTML:i,Fragment:s}=wp.element,{InspectorControls:c}=wp.blockEditor;r("wemail/forms",{title:__("weMail"),description:__("Here you can add your weMail form."),category:"common",icon:a,keywords:[__("forms"),__("mail")],attributes:{formId:{type:"string"},shortcode:{type:"string"},isLoading:{type:"boolean",default:!1}},edit(t){function r(e){var a;t.setAttributes({shortcode:(a=e,`[wemail_form id="${a}"]`),formId:e,isLoading:!0})}function i(e){t.setAttributes({isLoading:!1});let a=e.target;a.removeAttribute("height"),a.height=a.contentWindow.document.body.offsetHeight}const m=[{label:__("Select your form"),value:"",disabled:!1}];return weMailData.forms.forEach((e=>{m.push({label:e.name,value:e.id})})),(0,e.createElement)("div",{className:"wemail-block"},(0,e.createElement)(c,null,(0,e.createElement)(l,{title:__("Forms")},(0,e.createElement)(o,{label:__("Select your form"),value:t.attributes.formId,onChange:r,options:m}))),t.attributes.formId?function(t){return(0,e.createElement)("div",{height:"500px",className:"wemail-block-form-preview"},(0,e.createElement)("div",{className:"wemail-block-overlay"}),(0,e.createElement)("iframe",{className:t.attributes.isLoading?"hide":"",onLoad:i,width:"100%",src:`${window.weMailData.siteUrl}/wp-admin/admin-ajax.php?action=wemail_preview&form_id=${t.attributes.formId}`,frameBorder:"0",scrolling:"no"}),t.attributes.isLoading?(0,e.createElement)(n,null):null)}(t):function(t,l){return(0,e.createElement)(s,null,(0,e.createElement)("div",{className:"icon"},a({color:!0})),(0,e.createElement)("h2",{className:"title"},__("weMail Form")),(0,e.createElement)(o,{value:t.attributes.formId,onChange:r,label:__("Forms"),options:l}))}(t,m))},save:t=>(0,e.createElement)(i,null,t.attributes.shortcode)})}();